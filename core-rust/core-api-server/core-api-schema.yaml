openapi: 3.1.0
# NOTES TO EDITORS:
#
# Guidance for integer types (see https://swagger.io/docs/specification/data-models/data-types/#numbers)
#
# => If a u8, use type: integer, format: int32, minimum: 0, maximum: 255
# => If an i8, use type: integer, format: int32, minimum: -128, maximum: 127 (also, why are you using an i8!?)
# => If a u32:
#    => If there's a domain-imposed requirement that fits it within an i32 (2,147,483,647 = 2^31 - 1), with bound B use
#       type: integer, format: int32, minimum: 0, maximum: B
#       And be sure to validate against B in the code which maps into the type. See EG epoch max length in numerics.rs
#    => If not, to be compatible with OAS, we need to put it into an int64:
#       type: integer, format: int64, minimum: 0, maximum: 4294967295 = 2^32 - 1
# => If an i32, use type: integer, format: int32
# => If a u64:
#    => The maximum safe integer in Javascript is (+-)2^53 – 1 = 9,007,199,254,740,991 ~ 9 * 10^15
#       To be pragmatic, any numbers outside this range we will choose to represent as strings.
#    => So if it's possible for us to assert that: value <= bound B <= 2^53 - 1, then use:
#       type: integer, format: int64, minimum: 0, maximum: B
#       And be sure to validate against B in the code which maps into the type. See EG epoch max length in numerics.rs
#    => If not, use a string instead
# => If an i64:
#    => The maximum safe integer in Javascript is (+-)2^53 – 1 = 9,007,199,254,740,991 ~ 9 * 10^15
#       To be pragmatic, any numbers outside this range we will choose to represent as strings.
#    => So if it's possible for us to assert that: -(2^53 - 1) <= B1 <= value <= B2 <= 2^53 - 1, then use:
#       type: integer, format: int64, minimum: B1, maximum: B2
#       And be sure to validate against B in the code which maps into the type. See EG epoch max length in numerics.rs
#    => If not, use a string instead
# => If something over i64/u64, use type: string
#
# Regardless of the type, specify in the description what the underlying type and bounds are, by starting with something like:
# - An integer between 0 and 10^10, giving
# - A decimal-string-encoded integer between 0 and 2^64 - 1, which
# - A decimal-string-encoded integer between 0 and 10^123, that
#
# Descriptions guidance:
# => For descriptions of encoded types, we follow this pattern: 'The xyz-encoded, abc-encoded xx of the yy'
#    EG 'The hex-encoded, SBOR-encoded data' or 'The hex-encoded double-SHA256 hash of the banana payload'
# => Don't end in a full-stop, unless it is more than 1 sentence, then all sentences should end in a full stop
# => It's not technically valid to have both $ref and description, but it works in ReDocly, so feel free to do it
#
# Naming guidance:
# => Hex-encoded hashes should end _hash
# => Hex-encoded bytes/payload should end _hex and not include _bytes
info:
  version: '0.2.0'
  title: 'Babylon Core API'
  license:
    name: The Radix License, Version 1.0
    url: https://www.radixfoundation.org/licenses/license-v1
  x-logo:
    url: https://docs.radixdlt.com/main/_images/radix-logo-banner.png
    href: https://docs.radixdlt.com
  description: |
    This API is exposed by the Babylon Radix node to give clients access to the Radix Engine, Mempool and State in the node.
    It is intended for use by node-runners on a private network, and is not intended to be exposed publicly.
    Heavy load may impact the node's function.

    If you require queries against historical ledger state, you may also wish to consider using the [Gateway API](https://betanet-gateway.redoc.ly/).
servers:
  - url: 'localhost:3333/core'
# See https://redocly.com/docs/api-reference-docs/specification-extensions/x-tag-groups/ for details
x-tagGroups:
  - name: Overview
    tags:
      - SubAPIs
      - Concepts
  - name: Endpoints
    tags:
      - Status
      - Transaction
      - Mempool
      - State
      - Stream
tags:
  - name: SubAPIs
    x-displayName: Sub-APIs
    x-traitTag: true # Don't display endpoints under this tag
    description: |
      The API is split into 5 sub apis:
      - **Status** (`/status/*`) - For status and configuration details for the node / engine.
      - **Transaction** (`/transaction/*`) - For transaction construction, preview, submission, and monitoring the status of an individual transaction.
      - **Mempool** (`/mempool/*`) - For information on the contents of the node's mempool.
      - **Current State** (`/state/*`) - For reading the state of entities. At present, we only support reading details from the top of the currently committed ledger.
      - **Stream** (`/stream/*`) - For reading the committed transactions.
  - name: Concepts
    x-displayName: Concepts
    x-traitTag: true # Don't display endpoints under this tag
    description: |
      Interacting with this API effectively may require knowledge about the Radix Babylon Transaction Model and the State Model.

      We share some very high-level details below, but please see the [official documentation](http://docs.radixdlt.com) for more details on this.

      ## Transactions

      User transactions are formed of a core "intent", which is then signed by 0+ signatories, before being notarized. The output is called a notarized payload.
      It is this notarized transaction payload which is submitted to the network.
      
      For most users, this construction process will generally happen in their Radix Wallet. If you wish to construct transactions programmatically or offline,
      you will need to integrate the Radix Engine Toolkit into your application for construction and finalization.

      Once submitted, a transaction payload can end up being either rejected or committed. Transactions get rejected if they fail to pass certain criteria at the given time.
      A transaction payload can be marked as a:
      - **Permanent Rejection** if it is never possible for it to be committed (eg it's statically invalid, or only valid up until epoch 100 and it's now epoch 101)
      - **Temporary Rejection** if it still may be possible that the transaction payload could be committed

      A given intent typically is only part of one submitted notarized payload, but it's possible for a notary to notarize and submit multiple payloads for the same intent.
      The Radix Engine ensures that any intent can only be committed once.

      A committed transaction is either committed with an outcome of "Success" or "Failure":
      - **Committed Failure** will result in fees being paid up until the failure point, but all other changes will be discarded.
      - **Committed Success** will result in all changes being committed.

      Only committed transactions appear on ledger. The status of rejected transactions can be read at submission time or from the transaction status endpoint - by virtue of
      a rejection cache on the node. This cache is limited in size, so rejected statuses may no longer be tracked after a period of time.

      For a more robust handling of transaction rejections, consider running your own Gateway.

      ## State Model

      The Radix Engine State Model can be thought of as a forest of state sub-trees.
      A state sub-tree consists of "entities". These entities have an ID, and 0 or more "substates" at keys underneath them. 
      These substates are typed, and can own other entities, forming a tree of ownership.

      Each state sub-tree has a root entity, and a single Bech32M Global Address, with a human-readable-prefix (and prefix byte) matching the root entity type.

      As an example, entities include concepts like Components, Packages, Vaults, Resource Managers and Key-Value Stores.
      Substates under a component include the Component Struct, Component Data, and Access Rules substates.
  - name: Status
    x-displayName: Status Endpoints
    description: |
      For status and configuration details for the node / engine.
  - name: Transaction
    x-displayName: Transaction Endpoints
    description: |
      For transaction construction, preview, submission, and monitoring the status of an individual transaction.
  - name: Mempool
    x-displayName: Mempool Endpoints
    description: |
      For information on the contents of the node's mempool.
  - name: State
    x-displayName: State Endpoints
    description: |
      For reading the state of entities. At present, we only support reading details from the top of the currently committed ledger.
  - name: Stream
    x-displayName: Stream Endpoints
    description: To query the transaction stream of the ledger.
paths:
##################
# Status Sub-API #
##################
  "/status/network-configuration":
    post:
      summary: Get Network Configuration
      description: Returns the network configuration of the network the node is connected to.
      tags:
        - Status
      responses:
        '200':
          description: Network Configuration
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NetworkConfigurationResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/status/network-status":
    post:
      summary: Get Network Status
      description: Returns the current state and status of the node's copy of the ledger.
      tags:
        - Status
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NetworkStatusRequest"
      responses:
        '200':
          description: Network Status
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NetworkStatusResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
###################
# Mempool Sub-API #
###################
  "/mempool/list":
    post:
      summary: Get Mempool List
      description: Returns the hashes of all the transactions currently in the mempool
      tags:
        - Mempool
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MempoolListRequest"
      responses:
        '200':
          description: Mempool List Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MempoolListResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/mempool/transaction":
    post:
      summary: Get Mempool Transaction
      description: Returns the payload of a transaction currently in the mempool
      tags:
        - Mempool
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MempoolTransactionRequest"
      responses:
        '200':
          description: Mempool Transaction Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MempoolTransactionResponse"
        '404':
          description: Not found error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
#######################
# Transaction Sub-API #
#######################
  "/transaction/parse":
    post:
      summary: Parse Transaction Payload
      description: Extracts the contents and hashes of various types of transaction payloads, or sub-payloads.
      tags:
        - Transaction
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TransactionParseRequest"
      responses:
        '200':
          description: Transaction Parse Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TransactionParseResponse"
        '400':
          description: Client error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/transaction/submit":
    post:
      summary: Transaction Submit
      description: |
        Submits a notarized transaction to the network. Returns whether the transaction submission was already included in the node's mempool.
      tags:
        - Transaction
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TransactionSubmitRequest"
      responses:
        '200':
          description: Transaction Submit Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TransactionSubmitResponse"
        '400':
          description: Client error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/transaction/status":
    post:
      summary: Get Transaction Status
      description: |
        Shares the node's knowledge of any payloads associated with the given intent hash.
        Generally there will be a single payload for a given intent, but it's theoretically possible there may be multiple.
        This knowledge is summarised into a status for the intent. This summarised status in the response is likely sufficient
        for most clients.
      tags:
        - Transaction
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TransactionStatusRequest"
      responses:
        '200':
          description: Transaction status response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TransactionStatusResponse"
        '400':
          description: Client error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/transaction/receipt":
    post:
      summary: Get Transaction Receipt
      description: |
        Gets the transaction receipt for a committed transaction.
      tags:
        - Transaction
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TransactionReceiptRequest"
      responses:
        '200':
          description: Committed transaction found response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TransactionReceiptResponse"
        '400':
          description: Client error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '404':
          description: Committed transaction not found response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/transaction/call-preview":
    post:
      summary: Scrypto Call Preview
      description: |
        Preview a scrypto function or method call against the latest network state.
        Returns the result of the scrypto function or method call.
      tags:
        - Transaction
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TransactionCallPreviewRequest"
            examples:
              method:
                summary: A method call example
                value: {"target":{"type":"method","component_address":"component_loc1qftacppvmr9ezmekxqpq58en0nk954x0a7jv2zz0hc7qfxlgx4","method_name":"lock_fee"},"arguments":["a120000000000010632d5ec66b050000000000000000000000000000000000000000000000"]}
              function:
                summary: A function call example
                value: {"target":{"type":"function","package_address":"package_loc1q9ufgsc8yh5fkv8kzny3vnp68gkmuytc004k0j8dkwvs0xq76q","blueprint_name":"GumballMachine","function_name":"instantiate_gumball_machine"},"arguments":["a120000000000010632d5ec66b050000000000000000000000000000000000000000000000"]}
      responses:
        '200':
          description: Result of the scrypto function call
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TransactionCallPreviewResponse"
        '400':
          description: Client error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/transaction/preview":
    post:
      summary: Transaction Preview
      description: |
        Preview a transaction against the latest network state, and returns the preview receipt.
      tags:
        - Transaction
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TransactionPreviewRequest"
      responses:
        '200':
          description: Transaction preview response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TransactionPreviewResponse"
        '400':
          description: Client error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
##################
# Stream Sub-API #
##################
  "/stream/transactions":
    post:
      summary: Get Committed Transactions
      description: |
        Returns the list of committed transactions.
      tags:
        - Stream
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/StreamTransactionsRequest"
      responses:
        '200':
          description: Committed transactions response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StreamTransactionsResponse"
        '400':
          description: Client error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
#################
# State Sub-API #
#################
  "/state/epoch":
    post:
      summary: Get Epoch Details
      description: |
        Reads the epoch manager's substate/s from the top of the current ledger.
      tags:
        - State
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/StateEpochRequest"
      responses:
        '200':
          description: Current state response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StateEpochResponse"
        '400':
          description: Client error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/state/clock":
    post:
      summary: Get Clock Details
      description: |
        Reads the clock's substate/s from the top of the current ledger.
      tags:
        - State
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/StateClockRequest"
      responses:
        '200':
          description: Current state response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StateClockResponse"
        '400':
          description: Client error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/state/component":
    post:
      summary: Get Component Details
      description: |
        Reads the component's substate/s from the top of the current ledger.
        Also recursively extracts vault balance totals from the component's entity subtree.
      tags:
        - State
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/StateComponentRequest"
      responses:
        '200':
          description: Current state response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StateComponentResponse"
        '400':
          description: Client error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '404':
          description: Not found error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/state/resource":
    post:
      summary: Get Resource Details
      description: |
        Reads the resource manager's substate/s from the top of the current ledger.
      tags:
        - State
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/StateResourceRequest"
      responses:
        '200':
          description: Current state response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StateResourceResponse"
        '400':
          description: Client error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '404':
          description: Not found error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/state/non-fungible":
    post:
      summary: Get Non-Fungible Details
      description: |
        Reads the data associated with a single Non-Fungible Unit under a Non-Fungible Resource.
      tags:
        - State
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/StateNonFungibleRequest"
      responses:
        '200':
          description: Current state response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StateNonFungibleResponse"
        '400':
          description: Client error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '404':
          description: Not found error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/state/package":
    post:
      summary: Get Package Details
      description: |
        Reads the package's substate/s from the top of the current ledger.
      tags:
        - State
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/StatePackageRequest"
      responses:
        '200':
          description: Current state response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StatePackageResponse"
        '400':
          description: Client error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '404':
          description: Not found error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
#############################################################################################
components:
  schemas:
##########################################
# GENERAL / SHARED MODELS - Transactions #
##########################################
    TransactionStatus:
      type: string
      enum:
        - Succeeded
        - Failed
        - Rejected
      description: The status of the transaction
    TransactionReceipt:
      type: object
      description: The transaction execution receipt
      required:
        - status
        - fee_summary
        - state_updates
      properties:
        status:
          $ref: "#/components/schemas/TransactionStatus"
        fee_summary:
          $ref: "#/components/schemas/FeeSummary"
        state_updates:
          $ref: "#/components/schemas/StateUpdates"
        next_epoch:
          $ref: "#/components/schemas/NextEpoch"
        output:
          type: array
          description: The manifest line-by-line engine return data (only present if status is Succeeded)
          items:
            $ref: "#/components/schemas/SborData"
        error_message:
          type: string
          description: Error message (only present if status is Failed or Rejected)
    NotarizedTransaction:
      type: object
      required:
        - hash
        - payload_hex
        - signed_intent
        - notary_signature
      properties:
        hash:
          $ref: "#/components/schemas/PayloadHash"
        payload_hex:
          type: string
          description: The hex-encoded full notarized transaction payload
        signed_intent:
          $ref: "#/components/schemas/SignedTransactionIntent"
        notary_signature:
          $ref: "#/components/schemas/Signature"
    SignedTransactionIntent:
      type: object
      required:
        - hash
        - intent
        - intent_signatures
      properties:
        hash:
          $ref: "#/components/schemas/SignaturesHash"
        intent:
          $ref: "#/components/schemas/TransactionIntent"
        intent_signatures:
          type: array
          items:
            $ref: "#/components/schemas/SignatureWithPublicKey"
    TransactionIntent:
      type: object
      required:
        - hash
        - header
        - manifest
        - blobs_hex
      properties:
        hash:
          $ref: "#/components/schemas/IntentHash"
        header:
          $ref: "#/components/schemas/TransactionHeader"
        manifest:
          $ref: "#/components/schemas/TransactionManifest"
    TransactionHeader:
      type: object
      required:
        - version
        - network_id
        - start_epoch_inclusive
        - end_epoch_exclusive
        - nonce
        - notary_public_key
        - notary_as_signatory
        - cost_unit_limit
        - tip_percentage
      properties:
        version:
          type: integer
          minimum: 0
          maximum: 255
        network_id:
          type: integer
          minimum: 0
          maximum: 255
        start_epoch_inclusive:
          type: integer
          format: int64
          minimum: 0
          maximum: 10000000000
          description: An integer between `0` and `10^10`, marking the epoch from which the transaction can be submitted
        end_epoch_exclusive:
          type: integer
          format: int64
          minimum: 0
          maximum: 10000000000
          description: An integer between `0` and `10^10`, marking the epoch from which the transaction will no longer be valid, and be rejected
        nonce:
          type: string
          description: A decimal-string-encoded integer between `0` and `2^64 - 1`, chosen to be unique to allow replay of transaction intents
        notary_public_key:
          $ref: "#/components/schemas/PublicKey"
        notary_as_signatory:
          type: boolean
          description: Specifies whether the notary's signature should be included in transaction signers list
        cost_unit_limit:
          type: integer
          format: int64
          minimum: 0
          maximum: 4294967295
          description: An integer between `0` and `2^32 - 1`, giving the maximum number of cost units available for transaction execution.
        tip_percentage:
          type: integer
          format: int32
          minimum: 0
          maximum: 255
          description: An integer between `0` and `255`, giving the validator tip as a percentage amount. A value of `1` corresponds to 1% of the fee.
    TransactionManifest:
      type: object
      required:
        - instructions
        - blobs_hex
      properties:
        instructions:
          type: string
          description: The decompiled transaction manifest instructions
        blobs_hex:
          type: object
          description: A map of the hex-encoded blob hash, to hex-encoded blob content
          additionalProperties:
            type: string
            description: The hex-encoded blob content
    NetworkIdentifier:
      description: The logical name of the network
      type: string
      example: "{{network}}"
    CommittedStateIdentifier:
      type: object
      # This should expand to include the state hash
      required:
        - state_version
        - accumulator_hash
      properties:
        state_version:
          type: integer
          format: int64
          minimum: 0
          maximum: 100000000000000
          description: An integer between `0` and `10^13`, representing the state version. The state version increments with each transaction, starting at `0` pre-genesis.
        accumulator_hash:
          type: string
          minLength: 64
          maxLength: 64
          description: |
            The hex-encoded transaction accumulator hash. This hash captures the order of all transactions on ledger.
            This hash is `ACC_{N+1} = SHA256(SHA256(CONCAT(ACC_N, LEDGER_HASH_{N})))`, starting with `ACC_0 = 000..000` the pre-genesis accumulator.
    TransactionIdentifiers:
      type: object
      required:
        - intent_hash
        - signatures_hash
        - payload_hash
      properties:
        intent_hash:
          $ref: "#/components/schemas/IntentHash"
        signatures_hash:
          $ref: "#/components/schemas/SignaturesHash"
        payload_hash:
          $ref: "#/components/schemas/PayloadHash"
    IntentHash:
      type: string
      minLength: 64
      maxLength: 64
      description: The hex-encoded transaction intent hash. This is known as the Intent Hash, Transaction ID or Transaction Identifier for user transactions. This hash is `SHA256(SHA256(compiled_intent))`
    SignaturesHash:
      type: string
      minLength: 64
      maxLength: 64
      description: The hex-encoded signed transaction hash. This is known as the Signed Transaction Hash or Signatures Hash. This is the hash which is signed as part of notarization. This hash is `SHA256(SHA256(compiled_signed_transaction))`
    PayloadHash:
      type: string
      minLength: 64
      maxLength: 64
      description: The hex-encoded notarized transaction hash. This is known as the Notarized Transaction Hash, Payload Hash or User Payload Hash. This hash is `SHA256(SHA256(compiled_notarized_transaction))`
    LedgerHash:
      type: string
      minLength: 64
      maxLength: 64
      description: The hex-encoded ledger-wrapped transaction hash. This is known as the Ledger Hash. This hash is `SHA256(SHA256(ledger_transaction_bytes))`
    ErrorResponse:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: integer
          description: A numeric code corresponding to the given HTTP error code.
        message:
          description: A human-readable error message.
          type: string
        trace_id:
          description: A GUID to be used when reporting errors, to allow correlation with the Core API's error logs, in the case where the Core API details are hidden.
          type: string
######################################
# GENERAL / SHARED MODELS - Receipts #
######################################
    FeeSummary:
      description: Fees paid
      type: object
      required:
        - cost_unit_price
        - tip_percentage
        - cost_unit_limit
        - cost_units_consumed
        - xrd_total_execution_cost
        - xrd_total_royalty_cost
        - xrd_total_tipped
        - cost_unit_execution_breakdown
        - cost_unit_royalty_breakdown
      properties:
        cost_unit_price:
          type: string
          description: |
            The string-encoded decimal representing the XRD price of a single cost unit.
            A decimal is formed of some signed integer `m` of attos (`10^(-18)`) units, where `-2^(256 - 1) <= m < 2^(256 - 1)`.
        tip_percentage:
          type: integer
          format: int32
          minimum: 0
          maximum: 255
          description: An integer between `0` and `255`, giving the validator tip as a percentage amount. A value of `1` corresponds to 1% of the fee.
        cost_unit_limit:
          type: integer
          format: int64
          minimum: 0
          maximum: 4294967295
          description: An integer between `0` and `2^32 - 1`, representing the maximum amount of cost units available for the transaction execution.
        cost_units_consumed:
          type: integer
          format: int64
          minimum: 0
          maximum: 4294967295
          description: An integer between `0` and `2^32 - 1`, representing the amount of cost units consumed by the transaction execution.
        xrd_total_execution_cost:
          type: string
          description: |
            The string-encoded decimal representing the total amount of XRD burned in the transaction as part of execution costs.
            A decimal is formed of some signed integer `m` of attos (`10^(-18)`) units, where `-2^(256 - 1) <= m < 2^(256 - 1)`.
        xrd_total_royalty_cost:
          type: string
          description: |
            The string-encoded decimal representing the total amount of XRD paid in royalties as part of the transaction.
            A decimal is formed of some signed integer `m` of attos (`10^(-18)`) units, where `-2^(256 - 1) <= m < 2^(256 - 1)`.
        xrd_total_tipped:
          type: string
          description: |
            The string-encoded decimal representing the total amount of XRD tipped to validators in the transaction.
            A decimal is formed of some signed integer `m` of attos (`10^(-18)`) units, where `-2^(256 - 1) <= m < 2^(256 - 1)`.
        xrd_vault_payments:
          type: array
          description: |
            A summary of which vaults were used to pay the fee. This is only present if the transaction was committed.
          items:
            $ref: "#/components/schemas/VaultPayment"
        cost_unit_execution_breakdown:
          type: string
          description: |
            A summary of where the execution cost went.
          additionalProperties:
            type: integer
            format: int64
            minimum: 0
            maximum: 4294967295
            description: An integer between `0` and `2^32 - 1`, representing the amount of cost units paid for this aspect of execution
        cost_unit_royalty_breakdown:
          type: string
          description: |
            A summary of where the royalties were paid to.
          items:
            $ref: "#/components/schemas/RoyaltyPayment"
    VaultPayment:
      type: object
      required:
        - vault_entity
        - xrd_amount
      properties:
        vault_entity:
          $ref: "#/components/schemas/EntityReference"
        xrd_amount:
          type: string
          description: |
            The string-encoded decimal representing the amount of fee in XRD paid by this vault.
            A decimal is formed of some signed integer `m` of attos (`10^(-18)`) units, where `-2^(256 - 1) <= m < 2^(256 - 1)`.
    RoyaltyPayment:
      type: object
      required:
        - royalty_receiver
        - cost_unit_amount
      properties:
        royalty_receiver:
          $ref: "#/components/schemas/GlobalEntityReference"
        cost_unit_amount:
          type: integer
          format: int64
          minimum: 0
          maximum: 4294967295
          description: An integer between `0` and `2^32 - 1`, representing the amount of cost units of royalty paid to this receiver.
    StateUpdates:
      type: object
      description: Transaction state updates (only present if status is Succeeded or Failed)
      required:
        - created_substates
        - updated_substates
        - deleted_substates
        - new_global_entities
      properties:
        created_substates:
          type: array
          items:
            $ref: "#/components/schemas/NewSubstateVersion"
        updated_substates:
          type: array
          items:
            $ref: "#/components/schemas/NewSubstateVersion"
        deleted_substates:
          type: array
          items:
            $ref: "#/components/schemas/DeletedSubstateVersionRef"
        new_global_entities:
          type: array
          items:
            $ref: "#/components/schemas/GlobalEntityAssignment"
    NextEpoch:
      type: object
      required:
        - epoch
        - validators
      properties:
        epoch:
          type: integer
          format: int64
          minimum: 0
          maximum: 10000000000
          description: An integer between `0` and `10^10`
        validators:
          type: array
          items:
            $ref: "#/components/schemas/EcdsaSecp256k1PublicKey"
    NewSubstateVersion:
      type: object
      required:
        - substate_id
        - version
        - substate_hex
        - substate_data_hash
        - substate_data
      properties:
        substate_id:
          $ref: "#/components/schemas/SubstateId"
        version:
          type: integer
          format: int64
          minimum: 0
          maximum: 100000000000000
          description: An integer between `0` and `10^13`, counting the number of times the substate was updated
        substate_hex:
          type: string
          description: The hex-encoded, SBOR-encoded substate data bytes
        substate_data_hash:
          type: string
          description: The hex-encoded single-SHA256 hash of the substate data bytes
        substate_data:
          $ref: "#/components/schemas/Substate"
    DeletedSubstateVersionRef:
      type: object
      required:
        - substate_id
        - substate_data_hash
        - version
      properties:
        substate_id:
          $ref: "#/components/schemas/SubstateId"
        substate_data_hash:
          type: string
          description: The hex-encoded single-SHA256 hash of the substate data bytes
        version:
          type: integer
          format: int64
          minimum: 0
          maximum: 100000000000000
          description: An integer between `0` and `10^13`, counting the number of times the substate was updated
    GlobalEntityReference:
      type: object
      required:
        - entity_type
        - global_address_hex
        - global_address
      properties:
        entity_type:
          $ref: "#/components/schemas/EntityType"
        global_address_hex:
          type: string
          description: The hex-encoded bytes of the entity's global address
        global_address:
          type: string
          description: The Bech32m-encoded human readable version of the entity's global address
    EntityReference:
      type: object
      required:
        - entity_type
        - entity_id_hex
      properties:
        entity_type:
          $ref: "#/components/schemas/EntityType"
        entity_id_hex:
          type: string
          description: The hex-encoded bytes of the entity id
    SubstateId:
      type: object
      required:
        - entity_type
        - entity_id_hex
        - substate_type
        - substate_key_type
        - substate_key_hex
      properties:
        entity_type:
          $ref: "#/components/schemas/EntityType"
        entity_id_hex:
          type: string
          description: The hex-encoded bytes of the entity id
        substate_type:
          $ref: "#/components/schemas/SubstateType"
        substate_key_type:
          $ref: "#/components/schemas/SubstateKeyType"
        substate_key_hex:
          type: string
          description: The hex-encoded bytes of the substate key, under the entity
    ResourceAddress:
      type: string
      description: The Bech32m-encoded human readable version of the resource address
    ComponentAddress:
      type: string
      description: The Bech32m-encoded human readable version of the component address
    PackageAddress:
      type: string
      description: The Bech32m-encoded human readable version of the package address
    ResourceChange:
      type: object
      required:
        - resource_address
        - component_entity
        - vault_entity
        - amount
      properties:
        resource_address:
          $ref: "#/components/schemas/ResourceAddress"
        component_entity:
          $ref: "#/components/schemas/EntityReference"
        vault_entity:
          $ref: "#/components/schemas/EntityReference"
        amount:
          type: string
          description: |
            The string-encoded decimal representing the XRD amount put or taken from the vault.
            A decimal is formed of some signed integer `m` of attos (`10^(-18)`) units, where `-2^(256 - 1) <= m < 2^(256 - 1)`.
#################################################
# GENERAL / SHARED MODELS - keys and signatures #
#################################################
    BlueprintFunctionIdentifier:
      type: object
      required:
        - package_address
        - blueprint_name
        - function_name
      properties:
        package_address:
          $ref: "#/components/schemas/PackageAddress"
        blueprint_name:
          type: string
        function_name:
          type: string
    ComponentMethodIdentifier:
      type: object
      required:
        - component_address
        - method_name
      properties:
        component_address:
          $ref: "#/components/schemas/ComponentAddress"
        method_name:
          type: string
    PublicKeyType:
      type: string
      enum:
        - EcdsaSecp256k1
        - EddsaEd25519
    PublicKey:
      oneOf:
        - $ref: '#/components/schemas/EcdsaSecp256k1PublicKey'
        - $ref: '#/components/schemas/EddsaEd25519PublicKey'
      discriminator:
        propertyName: key_type
        mapping:
          # NOTE: These need to match PublicKeyType
          EcdsaSecp256k1: '#/components/schemas/EcdsaSecp256k1PublicKey'
          EddsaEd25519: '#/components/schemas/EddsaEd25519PublicKey'
    EcdsaSecp256k1PublicKey:
      type: object
      required:
        - key_type
        - key_hex
      properties:
        key_type:
          $ref: '#/components/schemas/PublicKeyType'
        key_hex:
          type: string
          minLength: 66
          maxLength: 66
          description: The hex-encoded compressed ECDSA Secp256k1 public key (33 bytes)
    EddsaEd25519PublicKey:
      type: object
      required:
        - key_type
        - key_hex
      properties:
        key_type:
          $ref: '#/components/schemas/PublicKeyType'
        key_hex:
          type: string
          minLength: 64
          maxLength: 64
          description: The hex-encoded compressed EdDSA Ed25519 public key (32 bytes)
    Signature:
      oneOf:
        - $ref: '#/components/schemas/EcdsaSecp256k1Signature'
        - $ref: '#/components/schemas/EddsaEd25519Signature'
      discriminator:
        propertyName: key_type
        mapping:
          # NOTE: These need to match PublicKeyType
          EcdsaSecp256k1: '#/components/schemas/EcdsaSecp256k1Signature'
          EddsaEd25519: '#/components/schemas/EddsaEd25519Signature'
    EcdsaSecp256k1Signature:
      type: object
      required:
        - key_type
        - signature_hex
      properties:
        key_type:
          $ref: '#/components/schemas/PublicKeyType'
        signature_hex:
          type: string
          minLength: 130
          maxLength: 130
          description: A hex-encoded recoverable ECDSA Secp256k1 signature (65 bytes). The first byte is the recovery id, the remaining 64 bytes are the compact signature, ie `CONCAT(R, s)` where `R` and `s` are each 32-bytes in padded big-endian format.
    EddsaEd25519Signature:
      type: object
      required:
        - key_type
        - signature_hex
      properties:
        key_type:
          $ref: '#/components/schemas/PublicKeyType'
        signature_hex:
          type: string
          minLength: 128
          maxLength: 128
          description: A hex-encoded EdDSA Ed25519 signature (64 bytes). This is `CONCAT(R, s)` where `R` and `s` are each 32-bytes in padded big-endian format.
    SignatureWithPublicKey:
      oneOf:
        - $ref: '#/components/schemas/EcdsaSecp256k1SignatureWithPublicKey'
        - $ref: '#/components/schemas/EddsaEd25519SignatureWithPublicKey'
      discriminator:
        propertyName: key_type
        mapping:
          # NOTE: These need to match PublicKeyType
          EcdsaSecp256k1: '#/components/schemas/EcdsaSecp256k1SignatureWithPublicKey'
          EddsaEd25519: '#/components/schemas/EddsaEd25519SignatureWithPublicKey'
    EcdsaSecp256k1SignatureWithPublicKey:
      type: object
      required:
        - key_type
        - recoverable_signature
      description: Because ECDSA has recoverable signatures, this only includes a signature
      properties:
        key_type:
          $ref: '#/components/schemas/PublicKeyType'
        recoverable_signature:
          $ref: '#/components/schemas/EcdsaSecp256k1Signature'
    EddsaEd25519SignatureWithPublicKey:
      type: object
      required:
        - key_type
        - public_key
        - signature
      description: The EDDSA public key and signature 
      properties:
        key_type:
          $ref: '#/components/schemas/PublicKeyType'
        public_key:
          $ref: '#/components/schemas/EddsaEd25519PublicKey'
        signature:
          $ref: '#/components/schemas/EddsaEd25519Signature'
################################################
# GENERAL / SHARED MODELS - Dynamic auth rules #
################################################
    AccessRules:
      type: object
      required:
        - method_auth
        - grouped_auth
        - default_auth
        - method_auth_mutability
        - grouped_auth_mutability
        - default_auth_mutability
      properties:
        method_auth:
          type: array
          items:
            $ref: '#/components/schemas/MethodAuthEntry'
        grouped_auth:
          type: array
          items:
            $ref: '#/components/schemas/GroupedAuthEntry'
        default_auth:
          $ref: '#/components/schemas/AccessRule'
        method_auth_mutability:
          type: array
          items:
            $ref: '#/components/schemas/MethodAuthMutabilityEntry'
        grouped_auth_mutability:
          type: array
          items:
            $ref: '#/components/schemas/GroupedAuthEntry'
        default_auth_mutability:
          $ref: '#/components/schemas/AccessRule'
    MethodAuthEntry:
      type: object
      required:
        - method
        - access_rule_reference
      properties:
        method:
          $ref: '#/components/schemas/LocalMethodReference'
        access_rule_reference:
          $ref: '#/components/schemas/AccessRuleReference'
    MethodAuthMutabilityEntry:
      type: object
      required:
        - method
        - access_rule
      properties:
        method:
          $ref: '#/components/schemas/LocalMethodReference'
        access_rule:
          $ref: '#/components/schemas/AccessRule'
    LocalMethodReferenceType:
      type: string
      enum:
        - NativeMethod
        - ScryptoMethod
    LocalMethodReference:
      anyOf:
        - $ref: '#/components/schemas/LocalNativeMethodReference'
        - $ref: '#/components/schemas/LocalScryptoMethodReference'
      discriminator:
        propertyName: type
        mapping:
          # NOTE: These need to match LocalMethodReferenceType options above
          NativeMethod: '#/components/schemas/LocalNativeMethodReference'
          ScryptoMethod: '#/components/schemas/LocalScryptoMethodReference'
    LocalMethodReferenceBase:
      type: object
      required:
        - type
      properties:
        type:
          $ref: '#/components/schemas/LocalMethodReferenceType'
    LocalNativeMethodReference:
      allOf:
        - $ref: '#/components/schemas/LocalMethodReferenceBase'
        - type: object
          required:
            - name
          properties:
            name:
              type: string
    LocalScryptoMethodReference:
      allOf:
        - $ref: '#/components/schemas/LocalMethodReferenceBase'
        - type: object
          required:
            - name
          properties:
            name:
              type: string
    AccessRuleReferenceType:
      type: string
      enum:
        - Group
        - Rule
    AccessRuleReference:
      anyOf:
        - $ref: '#/components/schemas/GroupAccessRuleReference'
        - $ref: '#/components/schemas/RuleAccessRuleReference'
      discriminator:
        propertyName: type
        mapping:
          # NOTE: These need to match AccessRuleReferenceType options above
          Group: '#/components/schemas/GroupAccessRuleReference'
          Rule: '#/components/schemas/RuleAccessRuleReference'
    AccessRuleReferenceBase:
      type: object
      required:
        - type
      properties:
        type:
          $ref: '#/components/schemas/AccessRuleReferenceType'
    GroupAccessRuleReference:
      allOf:
        - $ref: '#/components/schemas/AccessRuleReferenceBase'
        - type: object
          required:
            - group_name
          properties:
            group_name:
              type: string
    RuleAccessRuleReference:
      allOf:
        - $ref: '#/components/schemas/AccessRuleReferenceBase'
        - type: object
          required:
            - access_rule
          properties:
            access_rule:
              $ref: '#/components/schemas/AccessRule'
    GroupedAuthEntry:
      type: object
      required:
        - group_name
        - access_rule
      properties:
        group_name:
          type: string
        access_rule:
          $ref: '#/components/schemas/AccessRule'
    AccessRuleType:
      type: string
      enum:
        - Protected
        - AllowAll
        - DenyAll
    AccessRule:
      anyOf:
        - $ref: '#/components/schemas/ProtectedAccessRule'
        - $ref: '#/components/schemas/AllowAllAccessRule'
        - $ref: '#/components/schemas/DenyAllAccessRule'
      discriminator:
        propertyName: type
        mapping:
          # NOTE: These need to match DynamicAuthorizationType options above
          Protected: '#/components/schemas/ProtectedAccessRule'
          AllowAll: '#/components/schemas/AllowAllAccessRule'
          DenyAll: '#/components/schemas/DenyAllAccessRule'
    AccessRuleBase:
      type: object
      required:
        - type
      properties:
        type:
          $ref: '#/components/schemas/AccessRuleType'
    ProtectedAccessRule:
      allOf:
        - $ref: '#/components/schemas/AccessRuleBase'
        - type: object
          required:
            - access_rule
          properties:
            access_rule:
              $ref: '#/components/schemas/AccessRuleNode'
    AllowAllAccessRule:
      allOf:
        - $ref: '#/components/schemas/AccessRuleBase'
        - type: object
    DenyAllAccessRule:
      allOf:
        - $ref: '#/components/schemas/AccessRuleBase'
        - type: object
    AccessRuleNodeType:
      type: string
      enum:
        - ProofRule
        - AnyOf
        - AllOf
    AccessRuleNode:
      anyOf:
        - $ref: '#/components/schemas/ProofAccessRuleNode'
        - $ref: '#/components/schemas/AnyOfAccessRuleNode'
        - $ref: '#/components/schemas/AllOfAccessRuleNode'
      discriminator:
        propertyName: type
        mapping:
          # NOTE: These need to match AccessRuleNodeType options above
          ProofRule: '#/components/schemas/ProofAccessRuleNode'
          AnyOf: '#/components/schemas/AnyOfAccessRuleNode'
          AllOf: '#/components/schemas/AllOfAccessRuleNode'
    AccessRuleNodeBase:
      type: object
      required:
        - type
      properties:
        type:
          $ref: '#/components/schemas/AccessRuleNodeType'
    ProofAccessRuleNode:
      allOf:
        - $ref: '#/components/schemas/AccessRuleNodeBase'
        - type: object
          required:
            - proof_rule
          properties:
            proof_rule:
              $ref: '#/components/schemas/ProofRule'
    AnyOfAccessRuleNode:
      allOf:
        - $ref: '#/components/schemas/AccessRuleNodeBase'
        - type: object
          required:
            - access_rules
          properties:
            access_rules:
              type: array
              items:
                $ref: '#/components/schemas/AccessRuleNode'
    AllOfAccessRuleNode:
      allOf:
        - $ref: '#/components/schemas/AccessRuleNodeBase'
        - type: object
          required:
            - access_rules
          properties:
            access_rules:
              type: array
              items:
                $ref: '#/components/schemas/AccessRuleNode'
    ProofRuleType:
      type: string
      enum:
        - Require
        - AmountOf
        - AllOf
        - AnyOf
        - CountOf
    ProofRule:
      anyOf:
        - $ref: '#/components/schemas/RequireProofRule'
        - $ref: '#/components/schemas/AmountOfProofRule'
        - $ref: '#/components/schemas/AllOfProofRule'
        - $ref: '#/components/schemas/AnyOfProofRule'
        - $ref: '#/components/schemas/CountOfProofRule'
      discriminator:
        propertyName: type
        mapping:
          # NOTE: These need to match ProofRuleType options above
          Require: '#/components/schemas/RequireProofRule'
          AmountOf: '#/components/schemas/AmountOfProofRule'
          AllOf: '#/components/schemas/AllOfProofRule'
          AnyOf: '#/components/schemas/AnyOfProofRule'
          CountOf: '#/components/schemas/CountOfProofRule'
    ProofRuleBase:
      type: object
      required:
        - type
      properties:
        type:
          $ref: '#/components/schemas/ProofRuleType'
    RequireProofRule:
      allOf:
        - $ref: '#/components/schemas/ProofRuleBase'
        - type: object
          required:
            - resource
          properties:
            resource:
              $ref: '#/components/schemas/DynamicResourceDescriptor'
    AmountOfProofRule:
      allOf:
        - $ref: '#/components/schemas/ProofRuleBase'
        - type: object
          required:
            - amount
            - resource
          properties:
            amount:
              $ref: '#/components/schemas/DynamicAmount'
            resource:
              $ref: '#/components/schemas/DynamicResourceDescriptor'
    AllOfProofRule:
      allOf:
        - $ref: '#/components/schemas/ProofRuleBase'
        - type: object
          required:
            - list
          properties:
            list:
              $ref: '#/components/schemas/DynamicResourceDescriptorList'
    AnyOfProofRule:
      allOf:
        - $ref: '#/components/schemas/ProofRuleBase'
        - type: object
          required:
            - list
          properties:
            list:
              $ref: '#/components/schemas/DynamicResourceDescriptorList'
    CountOfProofRule:
      allOf:
        - $ref: '#/components/schemas/ProofRuleBase'
        - type: object
          required:
            - count
            - list
          properties:
            count:
              $ref: '#/components/schemas/DynamicCount'
            list:
              $ref: '#/components/schemas/DynamicResourceDescriptorList'
    DynamicAmountType:
      type: string
      enum:
        - Amount
        - SchemaPath
    DynamicAmount:
      anyOf:
        - $ref: '#/components/schemas/AmountDynamicAmount'
        - $ref: '#/components/schemas/SchemaPathDynamicAmount'
      discriminator:
        propertyName: type
        mapping:
          # NOTE: These need to match DynamicAmountType options above
          Amount: '#/components/schemas/AmountDynamicAmount'
          SchemaPath: '#/components/schemas/SchemaPathDynamicAmount'
    DynamicAmountBase:
      type: object
      required:
        - type
      properties:
        type:
          $ref: '#/components/schemas/DynamicAmountType'
    AmountDynamicAmount:
      allOf:
        - $ref: '#/components/schemas/DynamicAmountBase'
        - type: object
          required:
            - amount
          properties:
            amount:
              type: string
              description: |
                The string-encoded decimal representing the amount of resource required to pass the proof rule.
                A decimal is formed of some signed integer `m` of attos (`10^(-18)`) units, where `-2^(256 - 1) <= m < 2^(256 - 1)`.
    SchemaPathDynamicAmount:
      allOf:
        - $ref: '#/components/schemas/DynamicAmountBase'
        - type: object
          required:
            - schema_path
          properties:
            schema_path:
              $ref: '#/components/schemas/SchemaPath'
    DynamicCountType:
      type: string
      enum:
        - Count
        - SchemaPath
    DynamicCount:
      anyOf:
        - $ref: '#/components/schemas/CountDynamicCount'
        - $ref: '#/components/schemas/SchemaPathDynamicCount'
      discriminator:
        propertyName: type
        mapping:
          # NOTE: These need to match DynamicCountType options above
          Count: '#/components/schemas/CountDynamicCount'
          SchemaPath: '#/components/schemas/SchemaPathDynamicCount'
    DynamicCountBase:
      type: object
      required:
        - type
      properties:
        type:
          $ref: '#/components/schemas/DynamicCountType'
    CountDynamicCount:
      allOf:
        - $ref: '#/components/schemas/DynamicCountBase'
        - type: object
          required:
            - count
          properties:
            count:
              type: integer
              minimum: 0
              maximum: 255
    SchemaPathDynamicCount:
      allOf:
        - $ref: '#/components/schemas/DynamicCountBase'
        - type: object
          required:
            - schema_path
          properties:
            schema_path:
              $ref: '#/components/schemas/SchemaPath'
    DynamicResourceDescriptorListType:
      type: string
      enum:
        - List
        - SchemaPath
    DynamicResourceDescriptorList:
      anyOf:
        - $ref: '#/components/schemas/ListDynamicResourceDescriptorList'
        - $ref: '#/components/schemas/SchemaPathDynamicResourceDescriptorList'
      discriminator:
        propertyName: type
        mapping:
          # NOTE: These need to match DynamicResourceDescriptorListType options above
          List: '#/components/schemas/ListDynamicResourceDescriptorList'
          SchemaPath: '#/components/schemas/SchemaPathDynamicResourceDescriptorList'
    DynamicResourceDescriptorListBase:
      type: object
      required:
        - type
      properties:
        type:
          $ref: '#/components/schemas/DynamicResourceDescriptorListType'
    ListDynamicResourceDescriptorList:
      allOf:
        - $ref: '#/components/schemas/DynamicResourceDescriptorListBase'
        - type: object
          required:
            - resources
          properties:
            resources:
              type: array
              items:
                $ref: '#/components/schemas/DynamicResourceDescriptor'
    SchemaPathDynamicResourceDescriptorList:
      allOf:
        - $ref: '#/components/schemas/DynamicResourceDescriptorListBase'
        - type: object
          required:
            - schema_path
          properties:
            schema_path:
              $ref: '#/components/schemas/SchemaPath'
    DynamicResourceDescriptorType:
      type: string
      enum:
        - NonFungible
        - Resource
    DynamicResourceDescriptor:
      anyOf:
        - $ref: '#/components/schemas/NonFungibleDynamicResourceDescriptor'
        - $ref: '#/components/schemas/ResourceDynamicResourceDescriptor'
        - $ref: '#/components/schemas/SchemaPathDynamicResourceDescriptor'
      discriminator:
        propertyName: type
        mapping:
          # NOTE: These need to match DynamicResourceDescriptorType options above
          NonFungible: '#/components/schemas/NonFungibleDynamicResourceDescriptor'
          Resource: '#/components/schemas/ResourceDynamicResourceDescriptor'
          SchemaPath: '#/components/schemas/SchemaPathDynamicResourceDescriptor'
    DynamicResourceDescriptorBase:
      type: object
      required:
        - type
      properties:
        type:
          $ref: '#/components/schemas/DynamicResourceDescriptorType'
    NonFungibleDynamicResourceDescriptor:
      allOf:
        - $ref: '#/components/schemas/DynamicResourceDescriptorBase'
        - type: object
          required:
            - resource_address
            - non_fungible_id
          properties:
            resource_address:
              $ref: '#/components/schemas/ResourceAddress'
            non_fungible_id:
              $ref: '#/components/schemas/NonFungibleId'
    ResourceDynamicResourceDescriptor:
      allOf:
        - $ref: '#/components/schemas/DynamicResourceDescriptorBase'
        - type: object
          required:
            - resource_address
          properties:
            resource_address:
              $ref: '#/components/schemas/ResourceAddress'
    SchemaPathDynamicResourceDescriptor:
      allOf:
        - $ref: '#/components/schemas/DynamicResourceDescriptorBase'
        - type: object
          required:
            - schema_path
          properties:
            schema_path:
              $ref: '#/components/schemas/SchemaPath'
    SchemaPath:
      type: array
      items:
        $ref: '#/components/schemas/SchemaSubpath'
    SchemaSubpathType:
      type: string
      enum:
        - Index
        - Field
    SchemaSubpath:
      anyOf:
        - $ref: '#/components/schemas/IndexSchemaSubpath'
        - $ref: '#/components/schemas/FieldSchemaSubpath'
      discriminator:
        propertyName: type
        mapping:
          # NOTE: These need to match SchemaSubpathType options above
          Index: '#/components/schemas/IndexSchemaSubpath'
          Field: '#/components/schemas/FieldSchemaSubpath'
    SchemaSubpathBase:
      type: object
      required:
        - type
      properties:
        type:
          $ref: '#/components/schemas/SchemaSubpathType'
    IndexSchemaSubpath:
      allOf:
        - $ref: '#/components/schemas/SchemaSubpathBase'
        - type: object
          required:
            - index
          properties:
            index:
              type: string
              description: A decimal-string-encoded integer between 0 and 2^64 - 1, which captures the index of the schema sub-path
    FieldSchemaSubpath:
      allOf:
        - $ref: '#/components/schemas/SchemaSubpathBase'
        - type: object
          required:
            - field
          properties:
            field:
              type: string
              description: The name of the field
#######################################
# GENERAL / SHARED MODELS - Resources #
#######################################
    ResourceType:
      type: string
      enum:
        - Fungible
        - NonFungible
    NonFungibleIdType:
      type: string
      enum:
        - String
        - Number
        - Bytes
        - UUID
    NonFungibleId:
      type: object
      required:
        - simple_rep
        - id_type
        - sbor_hex
      properties:
        simple_rep:
          $ref: '#/components/schemas/NonFungibleIdSimpleRepresentation'
        id_type:
          $ref: '#/components/schemas/NonFungibleIdType'
        sbor_hex:
          type: string
          description: The hex-encoded SBOR-encoded bytes of its non-fungible id
    NonFungibleIdSimpleRepresentation:
      type: string
      description: |
        The simple string representation of the non-fungible id.
        For string id types, this is simply the string itself; for integer types, this is the integer as a decimal; and for the bytes id type, this is the lower case hex representation.
        A non-fungible resource has a fixed `NonFungibleIdType`, so this representation uniquely identifies this non-fungible
        under the given resource address.
    ResourceAmount:
      oneOf:
        - $ref: '#/components/schemas/FungibleResourceAmount'
        - $ref: '#/components/schemas/NonFungibleResourceAmount'
      discriminator:
        propertyName: resource_type
        mapping:
          # NOTE: These need to match ResourceType options
          Fungible: '#/components/schemas/FungibleResourceAmount'
          NonFungible: '#/components/schemas/NonFungibleResourceAmount'
    ResourceAmountBase:
      type: object
      required:
        - resource_type
        - resource_address
      properties:
        resource_type:
          $ref: '#/components/schemas/ResourceType'
        resource_address:
          $ref: '#/components/schemas/ResourceAddress'
    FungibleResourceAmount:
      allOf:
        - $ref: '#/components/schemas/ResourceAmountBase'
        - type: object
          required:
            - amount
          properties:
            amount:
              type: string
              description: |
                The string-encoded decimal representing the amount of this resource (some decimal for fungible resources, a whole integer for non-fungible resources).
                A decimal is formed of some signed integer `m` of attos (`10^(-18)`) units, where `-2^(256 - 1) <= m < 2^(256 - 1)`.
    NonFungibleResourceAmount:
      allOf:
        - $ref: '#/components/schemas/ResourceAmountBase'
        - type: object
          required:
            - non_fungible_ids
          properties:
            non_fungible_ids:
              type: array
              items:
                $ref: '#/components/schemas/NonFungibleId'
##################################
# GENERAL / SHARED MODELS - SBOR #
##################################
    DataStruct:
      type: object
      required:
        - struct_data
        - owned_entities
        - referenced_entities
      properties:
        struct_data:
          $ref: '#/components/schemas/SborData'
          description: The struct data
        owned_entities:
          type: array
          items:
            $ref: '#/components/schemas/EntityReference'
        referenced_entities:
          type: array
          items:
            $ref: '#/components/schemas/GlobalEntityReference'
    SborData:
      type: object
      required:
        - data_hex
        - data_json
      properties:
        data_hex:
          type: string
          description: The hex-encoded, raw SBOR-encoded data
        data_json:
          description: An untyped JSON body representing the content of the SBOR data
#####################################
# GENERAL / SHARED MODELS - Royalty #
#####################################
    BlueprintRoyaltyConfig:
      type: object
      required:
        - blueprint_name
        - royalty_config
      properties:
        blueprint_name:
          type: string
        royalty_config:
          $ref: '#/components/schemas/RoyaltyConfig'
    RoyaltyConfig:
      type: object
      required:
        - method_rules
        - default_rule
      properties:
        method_rules:
          description: The royalty rules by method
          type: array
          items:
            $ref: '#/components/schemas/MethodRoyaltyRule'
        default_rule:
          $ref: '#/components/schemas/RoyaltyRule'
    MethodRoyaltyRule:
      type: object
      required:
        - method_name
        - royalty_rule
      properties:
        method_name:
          type: string
        royalty_rule:
          $ref: '#/components/schemas/RoyaltyRule'
    RoyaltyRule:
      type: integer
      format: int64
      minimum: 0
      maximum: 4294967295
      description: An integer between `0` and `2^32 - 1`, representing the number of cost units required to access this method.
#######################################
# GENERAL / SHARED MODELS - substates #
#######################################
    EntityType:
      type: string
      enum:
        - EpochManager
        - ResourceManager
        - Component
        - Package
        - Vault
        - KeyValueStore
        - Global
        - NonFungibleStore
        - Clock
    Substate:
      anyOf:
        - $ref: '#/components/schemas/MetadataSubstate'
        - $ref: '#/components/schemas/AccessRulesChainSubstate'
        - $ref: '#/components/schemas/GlobalAddressSubstate'
        - $ref: '#/components/schemas/ComponentInfoSubstate'
        - $ref: '#/components/schemas/ComponentStateSubstate'
        - $ref: '#/components/schemas/ComponentRoyaltyConfigSubstate'
        - $ref: '#/components/schemas/ComponentRoyaltyAccumulatorSubstate'
        - $ref: '#/components/schemas/PackageInfoSubstate'
        - $ref: '#/components/schemas/PackageRoyaltyConfigSubstate'
        - $ref: '#/components/schemas/PackageRoyaltyAccumulatorSubstate'
        - $ref: '#/components/schemas/ResourceManagerSubstate'
        - $ref: '#/components/schemas/EpochManagerSubstate'
        - $ref: '#/components/schemas/ValidatorSetSubstate'
        - $ref: '#/components/schemas/ClockCurrentMinuteSubstate'
        - $ref: '#/components/schemas/KeyValueStoreEntrySubstate'
        - $ref: '#/components/schemas/VaultSubstate'
        - $ref: '#/components/schemas/NonFungibleStoreEntrySubstate'
      discriminator:
        propertyName: substate_type
        mapping:
          # NOTE: These need to match SubstateType options below
          Metadata: '#/components/schemas/MetadataSubstate'
          AccessRulesChain: '#/components/schemas/AccessRulesChainSubstate'
          GlobalAddress: '#/components/schemas/GlobalAddressSubstate'
          ComponentInfo: '#/components/schemas/ComponentInfoSubstate'
          ComponentState: '#/components/schemas/ComponentStateSubstate'
          ComponentRoyaltyConfig: '#/components/schemas/ComponentRoyaltyConfigSubstate'
          ComponentRoyaltyAccumulator: '#/components/schemas/ComponentRoyaltyAccumulatorSubstate'
          PackageInfo: '#/components/schemas/PackageInfoSubstate'
          PackageRoyaltyConfig: '#/components/schemas/PackageRoyaltyConfigSubstate'
          PackageRoyaltyAccumulator: '#/components/schemas/PackageRoyaltyAccumulatorSubstate'
          ResourceManager: '#/components/schemas/ResourceManagerSubstate'
          EpochManager: '#/components/schemas/EpochManagerSubstate'
          ValidatorSet: '#/components/schemas/ValidatorSetSubstate'
          ClockCurrentMinute: '#/components/schemas/ClockCurrentMinuteSubstate'
          KeyValueStoreEntry: '#/components/schemas/KeyValueStoreEntrySubstate'
          Vault: '#/components/schemas/VaultSubstate'
          NonFungibleStoreEntry: '#/components/schemas/NonFungibleStoreEntrySubstate'
    SubstateType:
      type: string
      enum:
        # Common
        - Metadata
        - AccessRulesChain
        # Specific
        - GlobalAddress
        - ComponentInfo
        - ComponentState
        - ComponentRoyaltyConfig
        - ComponentRoyaltyAccumulator
        - PackageInfo
        - PackageRoyaltyConfig
        - PackageRoyaltyAccumulator
        - ResourceManager
        - EpochManager
        - ValidatorSet
        - ClockCurrentMinute
        - KeyValueStoreEntry
        - NonFungibleStoreEntry
        - Vault
    SubstateKeyType:
      # This corresponds to what's currently referred to as the "SubstateOffset"
      # This is roughly the same as the substate type, but some entities have two of the same substates
      # (eg ResourceManagers have two AccessRulesChain substates)
      type: string
      description: |
        Slightly different to the SubstateType - some entities have two of the same substate (eg ResouceManager AccessRuleChains)
      enum:
        # Common
        - Metadata
        - AccessRulesChain
        # Specific
        - GlobalAddress
        - ComponentInfo
        - ComponentState
        - ComponentRoyaltyConfig
        - ComponentRoyaltyAccumulator
        - PackageInfo
        - PackageRoyaltyConfig
        - PackageRoyaltyAccumulator
        - ResourceManager
        - ResourceManagerVaultAccessRulesChain
        - EpochManager
        - CurrentValidatorSet
        - PreparingValidatorSet
        - ClockCurrentMinute
        - KeyValueStoreEntry
        - NonFungibleStoreEntry
        - Vault
    SubstateBase:
      type: object
      required:
        - substate_type
      properties:
        substate_type:
          $ref: '#/components/schemas/SubstateType'
### COMMON SUBSTATES
    AccessRulesChainSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - chain
          properties:
            chain:
              type: array
              description: |
                The layers of access rules applied.
              items:
                $ref: '#/components/schemas/AccessRules'
    MetadataSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - metadata
          properties:
            metadata:
              type: array
              items:
                type: object
                required:
                  - key
                  - value
                properties:
                  key:
                    type: string
                  value:
                    type: string
### SPECIFIC SUBSTATES
    GlobalAddressSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - target_entity
          properties:
            target_entity:
              $ref: '#/components/schemas/GlobalEntityAssignment'
    GlobalEntityAssignment:
      type: object
      required:
        - target_entity_type
        - target_entity_id_hex
        - global_entity_id_hex
        - global_address_hex
        - global_address
      properties:
        target_entity_type:
          $ref: "#/components/schemas/EntityType"
        target_entity_id_hex:
          type: string
          description: The hex-encoded bytes of the target entity id
        global_entity_id_hex:
          type: string
          description: The hex-encoded bytes of the global entity id
        global_address_hex:
          type: string
          description: The hex-encoded bytes of the assigned global address.
        global_address:
          type: string
          description: The Bech32m-encoded human readable version of the assigned global address
    ComponentInfoSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - package_address
            - blueprint_name
          properties:
            package_address:
              $ref: '#/components/schemas/PackageAddress'
            blueprint_name:
              type: string
    ComponentStateSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - data_struct
          properties:
            data_struct:
              $ref: '#/components/schemas/DataStruct'
    ComponentRoyaltyConfigSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - royalty_config
          properties:
            royalty_config:
              $ref: '#/components/schemas/RoyaltyConfig'
    ComponentRoyaltyAccumulatorSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - vault_entity
          properties:
            vault_entity:
              $ref: "#/components/schemas/EntityReference"
    PackageInfoSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - code_hex
            - blueprints
          properties:
            code_hex:
              type: string
              description: The hex-encoded package code
            blueprints:
              type: object
              description: A map from the blueprint name to BlueprintData
              additionalProperties:
                $ref: '#/components/schemas/BlueprintData'
    BlueprintData:
      type: object
      required:
        - abi
      properties:
        abi:
          $ref: '#/components/schemas/SborData'
          description: The abi data
    PackageRoyaltyConfigSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - blueprint_royalties
          properties:
            blueprint_royalties:
              type: array
              items:
                $ref: '#/components/schemas/BlueprintRoyaltyConfig'
    PackageRoyaltyAccumulatorSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - vault_entity
          properties:
            vault_entity:
              $ref: "#/components/schemas/EntityReference"
    ResourceManagerSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - resource_type
            - total_supply
            - auth_rules
          properties:
            resource_type:
              $ref: '#/components/schemas/ResourceType'
            fungible_divisibility:
              type: integer
              minimum: 0
              maximum: 18
            non_fungible_id_type:
              $ref: '#/components/schemas/NonFungibleIdType'
            total_supply:
              type: string
              description: |
                The string-encoded decimal representing the total supply of this resource.
                A decimal is formed of some signed integer `m` of attos (`10^(-18)`) units, where `-2^(256 - 1) <= m < 2^(256 - 1)`.
            owned_non_fungible_store:
              $ref: '#/components/schemas/EntityReference'
    EpochManagerSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - epoch
            - round
            - rounds_per_epoch
          properties:
            epoch:
              type: integer
              format: int64
              minimum: 0
              maximum: 10000000000
              description: An integer between `0` and `10^10`, marking the current epoch
            round:
              type: integer
              format: int64
              minimum: 0
              maximum: 10000000000
              description: An integer between `0` and `10^10`, marking the current round in an epoch
            rounds_per_epoch:
              type: integer
              format: int64
              minimum: 0
              maximum: 10000000000
              description: An integer between `0` and `10^10`, specifying the number of rounds per epoch
    ValidatorSetSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - validator_set
            - epoch
          properties:
            validator_set:
              type: array
              items:
                $ref: '#/components/schemas/EcdsaSecp256k1PublicKey'
            epoch:
              type: integer
              format: int64
              minimum: 0
              maximum: 10000000000
              description: An integer between `0` and `10^10`, marking the epoch the validator set is a part of
    ClockCurrentMinuteSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - timestamp_ms_rounded_down_to_minute
          properties:
            timestamp_ms_rounded_down_to_minute:
              type: integer
              format: int64
              minimum: 0
              maximum: 100000000000000
              description: An integer between `0` and `10^14`, marking the ledger unix timestamp in ms (rounded down to the current minute)
    KeyValueStoreEntrySubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - key_hex
            - is_deleted
          properties:
            key_hex:
              type: string
              description: The hex-encoded bytes of its key
            is_deleted:
              type: boolean
            data_struct:
              $ref: '#/components/schemas/DataStruct'
    VaultSubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - resource_amount
          properties:
            resource_amount:
              $ref: '#/components/schemas/ResourceAmount'
    NonFungibleStoreEntrySubstate:
      allOf:
        - $ref: '#/components/schemas/SubstateBase'
        - type: object
          required:
            - non_fungible_id
            - is_deleted
          properties:
            non_fungible_id:
              $ref: '#/components/schemas/NonFungibleId'
            non_fungible_data:
              $ref: '#/components/schemas/NonFungibleData'
            is_deleted:
              type: boolean
    NonFungibleData:
      type: object
      description: |
        Only present if the non fungible isn't deleted.
        NOTE: Currently there is no schema for mutable/immutable data, and it's not even guaranteed to be SBOR-encoded.
        But from scrypto, it likely always will be. For now, immutable_data / mutable_data is optional, and only included
        if the data is valid SBOR. When the payload is validated, `immutable_data_raw_hex` / `mutable_data_raw_hex` will
        be removed.
      required:
        - immutable_data_raw_hex
        - mutable_data_raw_hex
      properties:
        immutable_data:
          $ref: '#/components/schemas/DataStruct'
        immutable_data_raw_hex:
          type: string
          description: |
            The hex-encoded raw bytes of the immutable data of the NF.
        mutable_data:
          $ref: '#/components/schemas/DataStruct'
        mutable_data_raw_hex:
          type: string
          description: |
            The hex-encoded raw bytes of the mutadata data of the NF.
##########################################
# REQUEST: /status/network-configuration #
##########################################
    NetworkConfigurationResponse:
      type: object
      required:
        - version
        - network
        - network_hrp_suffix
        - address_types
        - well_known_addresses
      properties:
        version:
          description: Different versions regarding the node, network and api.
          type: object
          required:
            - core_version
            - api_version
          properties:
            core_version:
              type: string
            api_version:
              type: string
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
        network_hrp_suffix:
          type: string
          description: The network suffix used for Bech32m HRPs used for addressing.
        address_types:
          type: array
          items:
            $ref: "#/components/schemas/AddressType"
        well_known_addresses:
          type: object
          description: Key addresses for this network.
          required:
            - account_package
            - faucet
            - epoch_manager
            - clock
            - ecdsa_secp256k1
            - eddsa_ed25519
            - xrd
          properties:
            account_package:
              type: string
            faucet:
              type: string
            epoch_manager:
              type: string
            clock:
              type: string
            ecdsa_secp256k1:
              type: string
            eddsa_ed25519:
              type: string
            xrd:
              type: string
    AddressType:
      type: object
      required:
        - hrp_prefix
        - subtype
        - entity_type
        - address_byte_prefix
        - address_byte_length
      properties:
        subtype:
          type: string
          enum:
            - Resource
            - Package
            - NormalComponent
            - AccountComponent
            - EcdsaSecp256k1VirtualAccountComponent
            - EddsaEd25519VirtualAccountComponent
            - EpochManager
            - Clock
        hrp_prefix:
          type: string
        entity_type:
          $ref: "#/components/schemas/EntityType"
        address_byte_prefix:
          type: integer
          format: int32
          minimum: 0
          maximum: 255
        address_byte_length:
          type: integer
          format: int32
          minimum: 0
          maximum: 255
###################################
# REQUEST: /status/network-status #
###################################
    NetworkStatusRequest:
      type: object
      required:
        - network
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
    NetworkStatusResponse:
      type: object
      required:
        - pre_genesis_state_identifier
        - current_state_identifier
      properties:
        pre_genesis_state_identifier:
          $ref: "#/components/schemas/CommittedStateIdentifier"
          description: The ledger state identifier before the genesis transaction
        post_genesis_state_identifier:
          $ref: "#/components/schemas/CommittedStateIdentifier"
          description: The ledger state identifier after the genesis transaction. May not be present if genesis has not yet been run.
        current_state_identifier:
          $ref: "#/components/schemas/CommittedStateIdentifier"
          description: |
            The current state identifier at the top of the node's copy of the ledger.
            This is also the resultant state identifier of the node's last committed transaction.
##########################
# REQUEST: /mempool/list #
##########################
    MempoolListRequest:
      type: object
      required:
        - network
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
    MempoolListResponse:
      type: object
      required:
        - contents
      properties:
        contents:
          type: array
          items:
            $ref: "#/components/schemas/MempoolTransactionHashes"
    MempoolTransactionHashes:
      type: object
      required:
        - intent_hash
        - payload_hash
      properties:
        intent_hash:
          $ref: "#/components/schemas/IntentHash"
        payload_hash:
          $ref: "#/components/schemas/PayloadHash"
#################################
# REQUEST: /mempool/transaction #
#################################
    MempoolTransactionRequest:
      type: object
      required:
        - network
        - payload_hash
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
        payload_hash:
          $ref: "#/components/schemas/PayloadHash"
    MempoolTransactionResponse:
      type: object
      required:
        - notarized_transaction
      properties:
        notarized_transaction:
          $ref: "#/components/schemas/NotarizedTransaction"
###############################
# REQUEST: /transaction/parse #
###############################
    TransactionParseRequest:
      type: object
      required:
        - network
        - payload_hex
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
        payload_hex:
          type: string
          description: |
            A hex-encoded payload of a full transaction or a partial transaction - either a notarized transaction,
            a signed transaction intent an unsigned transaction intent, or a transaction manifest.
        parse_mode:
          type: string
          enum:
            - Any
            - Notarized
            - Signed
            - Unsigned
            - Manifest
            - Ledger
          description: |
            The type of transaction payload that should be assumed. If omitted, "Any" is used - where the payload is
            attempted to be parsed as each of the following in turn: Notarized, Signed, Unsigned, Manifest, Ledger.
        validation_mode:
          type: string
          enum:
            - None
            - Static
            - Full
          description: |
            The type of validation that should be performed, if the payload correctly decompiles as a Notarized Transaction.
            This is only relevant for Notarized payloads. If omitted, "Static" is used.
        response_mode:
          type: string
          enum:
            - Basic
            - Full
          description: |
            The amount of information to return in the response.
            "Basic" includes the type, validity information, and any relevant identifiers.
            "Full" also includes the fully parsed information.
            If omitted, "Full" is used.
    TransactionParseResponse:
      type: object
      required:
        - parsed
        - is_valid
      properties:
        parsed:
          $ref: "#/components/schemas/ParsedTransaction"
    ParsedTransactionType:
      type: string
      description: The type of the parsed (partial) transaction payload
      enum:
        - NotarizedTransaction
        - SignedTransactionIntent
        - TransactionIntent
        - TransactionManifest
        - LedgerTransaction
    ParsedTransaction:
      oneOf:
        - $ref: '#/components/schemas/ParsedNotarizedTransaction'
        - $ref: '#/components/schemas/ParsedSignedTransactionIntent'
        - $ref: '#/components/schemas/ParsedTransactionIntent'
        - $ref: '#/components/schemas/ParsedTransactionManifest'
        - $ref: '#/components/schemas/ParsedLedgerTransaction'
      discriminator:
        propertyName: type
        mapping:
          # NOTE: These need to match ParsedTransactionType
          NotarizedTransaction: '#/components/schemas/ParsedNotarizedTransaction'
          SignedTransactionIntent: '#/components/schemas/ParsedSignedTransactionIntent'
          TransactionIntent: '#/components/schemas/ParsedTransactionIntent'
          TransactionManifest: '#/components/schemas/ParsedTransactionManifest'
          LedgerTransaction: '#/components/schemas/ParsedLedgerTransaction'
    ParsedTransactionBase:
      type: object
      required:
        - type
      properties:
        type:
          $ref: "#/components/schemas/ParsedTransactionType"
    ParsedNotarizedTransaction:
      allOf:
        - $ref: "#/components/schemas/ParsedTransactionType"
        - type: object
          required:
            - identifiers
          properties:
            notarized_transaction:
              $ref: "#/components/schemas/NotarizedTransaction"
            identifiers:
              type: object
              required:
                - intent_hash
                - signatures_hash
                - payload_hash
                - ledger_hash
              properties:
                intent_hash:
                  $ref: "#/components/schemas/IntentHash"
                signatures_hash:
                  $ref: "#/components/schemas/SignaturesHash"
                payload_hash:
                  $ref: "#/components/schemas/PayloadHash"
                ledger_hash:
                  $ref: "#/components/schemas/LedgerHash"
            validation_error:
              type: object
              description: |
                If the transaction is known to not be valid, this gives a reason.
                Different levels of validation are performed, dependent on the validation mode.
                Note that, even if validation mode is Static or Full, the transaction may
                still be rejected or fail due to issues at runtime (eg if the loan cannot be repaid).
              required:
                - reason
                - is_permanent
              properties:
                reason:
                  type: string
                  description: |
                    The error message.
                is_permanent:
                  type: boolean
                  description: |
                    Whether the error is known to be permanent, or not.
                    This relates to whether the transaction would be rejected permanently or temporarily if submitted.
    ParsedSignedTransactionIntent:
      allOf:
        - $ref: "#/components/schemas/ParsedTransactionType"
        - type: object
          required:
            - identifiers
          properties:
            signed_intent:
              $ref: "#/components/schemas/SignedTransactionIntent"
            identifiers:
              type: object
              required:
                - intent_hash
                - signatures_hash
              properties:
                intent_hash:
                  $ref: "#/components/schemas/IntentHash"
                signatures_hash:
                  $ref: "#/components/schemas/SignaturesHash"
    ParsedTransactionIntent:
      allOf:
        - $ref: "#/components/schemas/ParsedTransactionType"
        - type: object
          required:
            - identifiers
          properties:
            intent:
              $ref: "#/components/schemas/TransactionIntent"
            identifiers:
              type: object
              required:
                - intent_hash
              properties:
                intent_hash:
                  $ref: "#/components/schemas/IntentHash"
    ParsedTransactionManifest:
      allOf:
        - $ref: "#/components/schemas/ParsedTransactionType"
        - type: object
          properties:
            manifest:
              $ref: "#/components/schemas/TransactionManifest"
    ParsedLedgerTransaction:
      allOf:
        - $ref: "#/components/schemas/ParsedTransactionType"
        - type: object
          required:
            - identifiers
          properties:
            ledger_transaction:
              $ref: "#/components/schemas/LedgerTransaction"
            identifiers:
              type: object
              required:
                - ledger_hash
              properties:
                intent_hash:
                  $ref: "#/components/schemas/IntentHash"
                signatures_hash:
                  $ref: "#/components/schemas/SignaturesHash"
                payload_hash:
                  $ref: "#/components/schemas/PayloadHash"
                ledger_hash:
                  $ref: "#/components/schemas/LedgerHash"
################################
# REQUEST: /transaction/submit #
################################
    TransactionSubmitRequest:
      type: object
      required:
        - network
        - notarized_transaction_hex
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
        notarized_transaction_hex:
          description: A hex-encoded, compiled notarized transaction.
          type: string
    TransactionSubmitResponse:
      type: object
      required:
        - duplicate
      properties:
        duplicate:
          description: Is true if the transaction is a duplicate of an existing transaction in the mempool.
          type: boolean
###################################
# REQUEST: /transaction/status #
###################################
    TransactionStatusRequest:
      type: object
      required:
        - network
        - intent_hash
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
        intent_hash:
          $ref: "#/components/schemas/IntentHash"
    TransactionStatusResponse:
      type: object
      required:
        - intent_status
        - known_payloads
      properties:
        intent_status:
          type: string
          description: The status of the transaction intent
          enum:
            - CommittedSuccess
            - CommittedFailure
            - InMempool
            - Rejected
            - Unknown
        known_payloads:
          type: array
          items:
            $ref: "#/components/schemas/TransactionPayloadStatus"
    TransactionPayloadStatus:
      type: object
      required:
        - payload_hash
        - status
      properties:
        payload_hash:
          $ref: "#/components/schemas/PayloadHash"
        status:
          type: string
          description: The status of the transaction payload, as per this node
          enum:
            - CommittedSuccess
            - CommittedFailure
            - InMempool
            - TransientlyRejected
            - PermanentlyRejected
        error_message:
          description: An explanation for the error, if failed or rejected
          type: string
####################################
# REQUEST: /transaction/receipt #
####################################
    TransactionReceiptRequest:
      type: object
      required:
        - network
        - intent_hash
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
        intent_hash:
          $ref: "#/components/schemas/IntentHash"
    TransactionReceiptResponse:
      type: object
      required:
        - committed
      properties:
        committed:
          $ref: "#/components/schemas/CommittedTransaction"
#####################################
# REQUEST: /transaction/callpreview #
#####################################
    TransactionCallPreviewRequest:
      type: object
      required:
        - network
        - target
        - arguments
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
        target:
          oneOf:
            - $ref: '#/components/schemas/ComponentMethodIdentifier'
            - $ref: '#/components/schemas/BlueprintFunctionIdentifier'
          discriminator:
            propertyName: type
            mapping:
              method: '#/components/schemas/ComponentMethodIdentifier'
              function: '#/components/schemas/BlueprintFunctionIdentifier'
        arguments:
          type: array
          description: Argument list
          items:
            type: string
            description: SBOR-encoded argument, formatted as a hex-string
    TransactionCallPreviewResponse:
      type: object
      required:
        - status
      properties:
        status:
          $ref: "#/components/schemas/TransactionStatus"
        output:
          $ref: "#/components/schemas/SborData"
        error_message:
          type: string
          description: Error message (only present if status is Failed or Rejected)
#################################
# REQUEST: /transaction/preview #
#################################
    TransactionPreviewRequest:
      type: object
      required:
        - network
        - manifest
        - start_epoch_inclusive
        - end_epoch_exclusive
        - cost_unit_limit
        - tip_percentage
        - nonce
        - signer_public_keys
        - flags
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
        manifest:
          description: A text-representation of a transaction manifest
          type: string
        blobs_hex:
          description: An array of hex-encoded blob data (optional)
          type: array
          items:
            type: string
        start_epoch_inclusive:
          type: integer
          format: int64
          minimum: 0
          maximum: 10000000000
          description: An integer between `0` and `10^10`, marking the epoch at which the transaction starts being valid
        end_epoch_exclusive:
          type: integer
          format: int64
          minimum: 0
          maximum: 10000000000
          description: An integer between `0` and `10^10`, marking the epoch at which the transaction is no longer valid
        notary_public_key:
          $ref: "#/components/schemas/PublicKey"
          description: The notary public key to use (optional)
        notary_as_signatory:
          type: boolean
          description: Whether the notary should count as a signatory (optional, default false)
        cost_unit_limit:
          type: integer
          format: int64
          minimum: 0
          maximum: 4294967295
          description: An integer between `0` and `2^32 - 1`, giving the maximum number of cost units available for transaction execution
        tip_percentage:
          type: integer
          format: int32
          minimum: 0
          maximum: 255
          description: An integer between `0` and `255`, giving the validator tip as a percentage amount. A value of `1` corresponds to 1% of the fee.
        nonce:
          type: string
          description: A decimal-string-encoded integer between `0` and `2^64 - 1`, used to ensure the transaction intent is unique.
        signer_public_keys:
          type: array
          items:
            $ref: "#/components/schemas/PublicKey"
          description: A list of public keys to be used as transaction signers
        flags:
          type: object
          required:
            - unlimited_loan
            - assume_all_signature_proofs
            - permit_duplicate_intent_hash
            - permit_invalid_header_epoch
          properties:
            unlimited_loan:
              type: boolean
            assume_all_signature_proofs:
              type: boolean
            permit_duplicate_intent_hash:
              type: boolean
            permit_invalid_header_epoch:
              type: boolean
    TransactionPreviewResponse:
      type: object
      required:
        - receipt
        - resource_changes
        - logs
      properties:
        receipt:
          $ref: "#/components/schemas/TransactionReceipt"
        resource_changes:
          type: array
          items:
            $ref: "#/components/schemas/ResourceChange"
        logs:
          type: array
          items:
            type: object
            required:
              - level
              - message
            properties:
              level:
                type: string
              message:
                type: string
#################################
# REQUEST: /stream/transactions #
#################################
    StreamTransactionsRequest:
      description: |
        A request to retrieve a sublist of committed transactions from the ledger.
      type: object
      required:
        - network
        - from_state_version
        - limit
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
        from_state_version:
          type: integer
          format: int64
          minimum: 1
          maximum: 100000000000000
          description: An integer between `1` and `10^13`, giving the first (resultant) state version to be returned
        limit:
          description: The maximum number of transactions that will be returned.
          type: integer
    StreamTransactionsResponse:
      type: object
      required:
        - from_state_version
        - count
        - max_ledger_state_version
        - transactions
      properties:
        from_state_version:
          type: integer
          format: int64
          minimum: 1
          maximum: 100000000000000
          description: |
            An integer between `1` and `10^13`, giving the first (resultant) state version in the returned response (if any).
            This matches the `from_state_version` in the request.
        count:
          type: integer
          format: int32
          minimum: 0
          maximum: 10000
          description: An integer between `0` and `10000`, giving the total count of transactions in the returned response
        max_ledger_state_version:
          type: integer
          format: int64
          minimum: 1
          maximum: 100000000000000
          description: An integer between `1` and `10^13`, giving the maximum state version currently committed on this node's ledger.
        transactions:
          description: A committed transactions list starting from the `from_state_version` (inclusive).
          type: array
          items:
            $ref: "#/components/schemas/CommittedTransaction"
    CommittedTransaction:
      type: object
      required:
        - state_version
        - accumulator_hash
        - ledger_transaction
        - receipt
      properties:
        state_version:
          type: integer
          format: int64
          minimum: 1
          maximum: 100000000000000
          description: An integer between `1` and `10^13`, giving the resultant state version after the transaction has been committed
        accumulator_hash:
          type: string
          minLength: 64
          maxLength: 64
          description: |
            The hex-encoded transaction accumulator hash. This hash captures the order of all transactions on ledger.
            This hash is `ACC_{N+1} = SHA256(SHA256(CONCAT(ACC_N, LEDGER_HASH_{N})))`, starting with `ACC_0 = 000..000` the pre-genesis accumulator.
        ledger_transaction:
          $ref: "#/components/schemas/LedgerTransaction"
        receipt:
          $ref: "#/components/schemas/TransactionReceipt"
    LedgerTransactionType:
      type: string
      description: The type of the ledger transaction
      enum:
        - User
        - Validator
        - System
    LedgerTransaction:
      oneOf:
        - $ref: '#/components/schemas/UserLedgerTransaction'
        - $ref: '#/components/schemas/ValidatorLedgerTransaction'
        - $ref: '#/components/schemas/SystemLedgerTransaction'
      discriminator:
        propertyName: type
        mapping:
          # NOTE: These need to match LedgerTransactionType
          User: '#/components/schemas/UserLedgerTransaction'
          Validator: '#/components/schemas/ValidatorLedgerTransaction'
          System: '#/components/schemas/SystemLedgerTransaction'
    LedgerTransactionBase:
      type: object
      required:
        - type
        - payload_hex
      properties:
        type:
          $ref: "#/components/schemas/LedgerTransactionType"
        payload_hex:
          type: string
          description: The hex-encoded full ledger transaction payload
    UserLedgerTransaction:
      allOf:
        - $ref: "#/components/schemas/LedgerTransactionBase"
        - type: object
          required:
            - notarized_transaction
          properties:
            notarized_transaction:
              $ref: "#/components/schemas/NotarizedTransaction"
    ValidatorLedgerTransaction:
      allOf:
        - $ref: "#/components/schemas/LedgerTransactionBase"
        - type: object
          required:
            - validator_transaction
          properties:
            validator_transaction:
              $ref: "#/components/schemas/ValidatorTransaction"
    SystemLedgerTransaction:
      allOf:
        - $ref: "#/components/schemas/LedgerTransactionBase"
        - type: object
          required:
            - system_transaction
          properties:
            system_transaction:
              $ref: "#/components/schemas/SystemTransaction"
    ValidatorTransactionType:
      type: string
      description: The type of the validator transaction
      enum:
        - EpochUpdate
        - TimeUpdate
    ValidatorTransaction:
      oneOf:
        - $ref: '#/components/schemas/EpochUpdateValidatorTransaction'
        - $ref: '#/components/schemas/TimeUpdateValidatorTransaction'
      discriminator:
        propertyName: type
        mapping:
          # NOTE: These need to match ValidatorTransactionType
          EpochUpdate: '#/components/schemas/EpochUpdateValidatorTransaction'
          TimeUpdate: '#/components/schemas/TimeUpdateValidatorTransaction'
    ValidatorTransactionBase:
      type: object
      required:
        - type
      properties:
        type:
          $ref: "#/components/schemas/ValidatorTransactionType"
    EpochUpdateValidatorTransaction:
      allOf:
        - $ref: "#/components/schemas/ValidatorTransactionBase"
        - type: object
          required:
            - scrypto_epoch
          properties:
            scrypto_epoch:
              type: integer
              format: int64
              minimum: 0
              maximum: 10000000000
              description: |
                An integer between `0` and `10^10`, marking the new epoch.
                Note that currently this is not the same as `consensus_epoch`, but eventually will be.
    TimeUpdateValidatorTransaction:
      allOf:
        - $ref: "#/components/schemas/ValidatorTransactionBase"
        - type: object
          required:
            - proposer_timestamp_ms
            - consensus_epoch
            - round_in_epoch
          properties:
            proposer_timestamp_ms:
              type: integer
              format: int64
              minimum: 0
              maximum: 100000000000000
              description: An integer between `0` and `10^14`, marking the round proposer's unix timestamp in ms
            consensus_epoch:
              type: integer
              format: int64
              minimum: 0
              maximum: 10000000000
              description: |
                An integer between `0` and `10^10`, marking the consensus epoch.
                Note that currently this is not the same as `scrypto_epoch`, but eventually will be.
            round_in_epoch:
              type: integer
              format: int64
              minimum: 0
              maximum: 10000000000
              description: An integer between `0` and `10^10`, marking the consensus round in the epoch
    SystemTransaction:
      type: object
      required:
        - payload_hex
      properties:
        payload_hex:
          type: string
          description: The hex-encoded system transaction payload
############################
# REQUEST: /state/epoch #
############################
    StateEpochRequest:
      type: object
      required:
        - network
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
    StateEpochResponse:
      type: object
      required:
        - epoch
      properties:
        epoch:
          type: integer
          format: int64
          minimum: 0
          maximum: 10000000000
          description: An integer between `0` and `10^10`, marking the current epoch
############################
# REQUEST: /state/clock #
############################
    StateClockRequest:
      type: object
      required:
        - network
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
    StateClockResponse:
      type: object
      required:
        - current_minute
      properties:
        current_minute:
          $ref: "#/components/schemas/Substate"
################################
# REQUEST: /state/component #
################################
    StateComponentRequest:
      type: object
      required:
        - network
        - component_address
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
        component_address:
          type: string
          description: The Bech32m-encoded human readable version of the component's global address
    StateComponentResponse:
      type: object
      required:
        - info
        - state
        - royalty_config
        - royalty_accumulator
        - metadata
        - access_rules
        - state_owned_vaults
        - descendent_ids
      properties:
        info:
          $ref: "#/components/schemas/Substate"
        state:
          $ref: "#/components/schemas/Substate"
        royalty_config:
          $ref: "#/components/schemas/Substate"
        royalty_accumulator:
          $ref: "#/components/schemas/Substate"
        metadata:
          $ref: "#/components/schemas/Substate"
        access_rules:
          $ref: "#/components/schemas/Substate"
        state_owned_vaults:
          type: array
          description: Any vaults owned directly or indirectly by the component
          items:
            $ref: "#/components/schemas/Substate"
        descendent_ids:
          type: array
          description: Any descendent nodes owned directly or indirectly by the component
          items:
            $ref: "#/components/schemas/StateComponentDescendentId"
    StateComponentDescendentId:
      type: object
      required:
        - parent
        - entity
        - depth
      properties:
        parent:
          $ref: "#/components/schemas/SubstateId"
        entity:
          $ref: "#/components/schemas/EntityReference"
        depth:
          description: Depth under component
          type: integer
          format: int32
          minimum: 0
          maximum: 100
###############################
# REQUEST: /state/resource #
###############################
    StateResourceRequest:
      type: object
      required:
        - network
        - resource_address
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
        resource_address:
          type: string
          description: The Bech32m-encoded human readable version of the resource's global address
    StateResourceResponse:
      type: object
      required:
        - manager
        - metadata
        - access_rules
        - vault_access_rules
      properties:
        manager:
          $ref: "#/components/schemas/Substate"
        metadata:
          $ref: "#/components/schemas/Substate"
        access_rules:
          $ref: "#/components/schemas/Substate"
        vault_access_rules:
          $ref: "#/components/schemas/Substate"
###################################
# REQUEST: /state/non-fungible #
###################################
    StateNonFungibleRequest:
      type: object
      required:
        - network
        - resource_address
        - non_fungible_id
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
        resource_address:
          type: string
          description: The Bech32m-encoded human readable version of the resource's global address
        non_fungible_id:
          $ref: '#/components/schemas/NonFungibleIdSimpleRepresentation'
    StateNonFungibleResponse:
      type: object
      required:
        - non_fungible
      properties:
        non_fungible:
          $ref: "#/components/schemas/Substate"
##############################
# REQUEST: /state/package #
##############################
    StatePackageRequest:
      type: object
      required:
        - network
        - package_address
      properties:
        network:
          $ref: "#/components/schemas/NetworkIdentifier"
        package_address:
          type: string
          description: The Bech32m-encoded human readable version of the package's global address
    StatePackageResponse:
      type: object
      required:
        - info
        - royalty_config
        - royalty_accumulator
        - metadata
        - access_rules
      properties:
        info:
          $ref: "#/components/schemas/Substate"
        royalty_config:
          $ref: "#/components/schemas/Substate"
        royalty_accumulator:
          $ref: "#/components/schemas/Substate"
        metadata:
          $ref: "#/components/schemas/Substate"
        access_rules:
          $ref: "#/components/schemas/Substate"